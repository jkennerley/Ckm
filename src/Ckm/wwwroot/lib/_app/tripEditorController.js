!function(){"use strict";
t.$inject = ["t", "n"];function t(t,n){var e=this;e.tripName=t.tripName,e.stops=[],e.errorMessage="",e.isBusy=!0,e.newStop={};var s="/api/trips/"+e.tripName+"/stops";n.get(s).then(function(t){console.log(s),console.log(t.data),angular.copy(t.data,e.stops),o(e.stops)},function(t){e.errorMessage="Failed to load"+t})["finally"](function(){e.isBusy=!1}),e.addStop=function(){e.isBusy=!0,e.errorMessage="",n.post(s,e.newStop).then(function(t){e.stops.push(t.data),o(e.stops),e.newStop={}},function(t){e.errorMessage="Failed to add new stop"})["finally"](function(){e.isBusy=!1})}}function o(t){if(t&&t.length>0){var o=_.map(t,function(t){return{lat:t.latitude,"long":t.longitude,info:t.name}});travelMap.createMap({selector:"#map",stops:o,currentStop:1,initialZoom:3})}}angular.module("app-trips").controller("tripEditorController",t)}();